海阔视界规则分享，当前分享的是：小程序￥home_rule_v2￥base64://@MY阿里云盘@eyJsYXN0X2NoYXB0ZXJfcnVsZSI6IiIsInRpdGxlIjoiTVnpmL/ph4zkupHnm5giLCJhdXRob3IiOiLpppnpm4Xmg4UiLCJ1cmwiOiJoaWtlcjovL2VtcHR5IiwidmVyc2lvbiI6MCwiY29sX3R5cGUiOiJtb3ZpZV8zIiwiY2xhc3NfbmFtZSI6IiIsInR5cGUiOiJ0b29sIiwiY2xhc3NfdXJsIjoiIiwiYXJlYV9uYW1lIjoiIiwiYXJlYV91cmwiOiIiLCJzb3J0X25hbWUiOiIiLCJ5ZWFyX25hbWUiOiIiLCJzb3J0X3VybCI6IiIsInllYXJfdXJsIjoiIiwiZmluZF9ydWxlIjoianM6XG52YXIgZCA9IFtdO1xuXG5mdW5jdGlvbiBmb3JtYXREYXRlKF9kYXRlLCBfZm10KSB7XG4gICAgbGV0IGZtdCA9IF9mbXQgfHwgXCJ5eXl5LU1NLWRkIEhIOm1tOnNzXCI7XG4gICAgY29uc3QgZGF0ZSA9ICFpc05hTihfZGF0ZSkgPyBuZXcgRGF0ZShfZGF0ZSAqIDEwMDApIDogbmV3IERhdGUoX2RhdGUpO1xuICAgIGNvbnN0IG8gPSB7XG4gICAgICAgIFwiTStcIjogZGF0ZS5nZXRNb250aCgpICsgMSwgLy/mnIjku70gXG4gICAgICAgIFwiZCtcIjogZGF0ZS5nZXREYXRlKCksIC8v5pelIFxuICAgICAgICBcImgrXCI6IGRhdGUuZ2V0SG91cnMoKSAlIDEyID09IDAgPyAxMiA6IGRhdGUuZ2V0SG91cnMoKSAlIDEyLFxuICAgICAgICBcIkgrXCI6IGRhdGUuZ2V0SG91cnMoKSwgLy/lsI/ml7YgXG4gICAgICAgIFwibStcIjogZGF0ZS5nZXRNaW51dGVzKCksIC8v5YiGIFxuICAgICAgICBcInMrXCI6IGRhdGUuZ2V0U2Vjb25kcygpLCAvL+enkiBcbiAgICAgICAgXCJxK1wiOiBNYXRoLmZsb29yKChkYXRlLmdldE1vbnRoKCkgKyAzKSAvIDMpLCAvL+Wto+W6piBcbiAgICAgICAgXCJTXCI6IGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCkgLy/mr6vnp5IgXG4gICAgfTtcbiAgICBpZiAoLyh5KykvLnRlc3QoZm10KSkge1xuICAgICAgICBmbXQgPSBmbXQucmVwbGFjZShSZWdFeHAuJDEsIChkYXRlLmdldEZ1bGxZZWFyKCkgKyBcIlwiKS5zdWJzdHIoNCAtIFJlZ0V4cC4kMS5sZW5ndGgpKTtcbiAgICB9XG4gICAgZm9yIChsZXQgayBpbiBvKSB7XG4gICAgICAgIGlmIChuZXcgUmVnRXhwKFwiKFwiICsgayArIFwiKVwiKS50ZXN0KGZtdCkpIHtcbiAgICAgICAgICAgIGZtdCA9IGZtdC5yZXBsYWNlKFJlZ0V4cC4kMSwgKFJlZ0V4cC4kMS5sZW5ndGggPT0gMSkgPyAob1trXSkgOiAoKFwiMDBcIiArIG9ba10pLnN1YnN0cigoXCJcIiArIG9ba10pLmxlbmd0aCkpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZm10O1xufTtcblxuZnVuY3Rpb24gZm9ybWF0U2l6ZShzaXplKSB7XG4gICAgaWYgKCFzaXplKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgY29uc3QgdW5pdHMgPSBbJ0InLCAnS0InLCAnTUInLCAnR0InLCAnVEInLCAnUEInLCAnRUInLCAnWkInLCAnWUInXTtcbiAgICBsZXQgaSA9IDA7XG4gICAgd2hpbGUgKHNpemUgPj0gMTAyNCkge1xuICAgICAgICBzaXplIC89IDEwMjQ7XG4gICAgICAgIGkrKztcbiAgICB9XG4gICAgc2l6ZSA9IGkgPyBOdW1iZXIoc2l6ZS50b0ZpeGVkKDIpKSA6IHNpemU7XG4gICAgcmV0dXJuIGAke3NpemV9ICR7dW5pdHNbaV19YDtcbn1cbi8vLy8vL1xudmFyIHRva2VuanNvbiA9IEpTT04ucGFyc2UoZmV0Y2goJ2hpa2VyOi8vZmlsZXMvcnVsZXMvaWN5L2ljeS1hbGktdG9rZW4uanNvbicsIHt9KSlbMF07XG52YXIgZHJpdmlkID0gdG9rZW5qc29uLmRlZmF1bHRfZHJpdmVfaWQ7XG5kLnB1c2goe1xuICAgIHRpdGxlOiAn5b2T5YmN55So5oi377yaJyArIHRva2VuanNvbi5uaWNrX25hbWUgKyAnICcgKyB0b2tlbmpzb24udXNlcl9uYW1lLFxuICAgIHVybDogJ2hpa2VyOi8vZW1wdHknLFxuICAgIGNvbF90eXBlOiBcImF2YXRhclwiLFxuICAgIHBpY191cmw6IHRva2VuanNvbi5hdmF0YXJcbn0pO1xuXG52YXIgc2VsZnJvb3QgPSBmZXRjaCgnaHR0cHM6Ly9hcGkuYWxpeXVuZHJpdmUuY29tL2Fkcml2ZS92My9maWxlL2xpc3QnLCB7XG4gICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAnYXV0aG9yaXphdGlvbic6IGdldE15VmFyKFwiYWxpYWNjZXNzVGtcIiwgXCJcIilcbiAgICB9LFxuICAgIGJvZHk6ICd7XCJkcml2ZV9pZFwiOlwiJyArIGRyaXZpZCArICdcIixcInBhcmVudF9maWxlX2lkXCI6XCJyb290XCIsXCJsaW1pdFwiOjEwMCxcImFsbFwiOmZhbHNlLFwidXJsX2V4cGlyZV9zZWNcIjoxNjAwLFwiaW1hZ2VfdGh1bWJuYWlsX3Byb2Nlc3NcIjpcImltYWdlL3Jlc2l6ZSx3XzQwMC9mb3JtYXQsanBlZ1wiLFwiaW1hZ2VfdXJsX3Byb2Nlc3NcIjpcImltYWdlL3Jlc2l6ZSx3XzE5MjAvZm9ybWF0LGpwZWdcIixcInZpZGVvX3RodW1ibmFpbF9wcm9jZXNzXCI6XCJ2aWRlby9zbmFwc2hvdCx0XzEwMDAsZl9qcGcsYXJfYXV0byx3XzMwMFwiLFwiZmllbGRzXCI6XCIqXCIsXCJvcmRlcl9ieVwiOlwibmFtZVwiLFwib3JkZXJfZGlyZWN0aW9uXCI6XCJBU0NcIn0nLFxuICAgIG1ldGhvZDogJ1BPU1QnXG59KTtcblxudmFyIGNvbnRzID0gSlNPTi5wYXJzZShzZWxmcm9vdCkuaXRlbXM7XG52YXIgZG9uZ3RhaSA9IEpTT04ucGFyc2UoZmV0Y2goJ2hpa2VyOi8vcGFnZS9zZWxmbGF6eXVybCcsIHt9KSkucnVsZS50b1N0cmluZygpO1xudmFyIHR1aXNvbmcgPSBbXTtcbmZvciAodmFyIGkgaW4gY29udHMpIHtcbiAgICB2YXIgbGlzdHlwID0gY29udHNbaV0udHlwZTtcbiAgICBpZiAobGlzdHlwICE9ICdmb2xkZXInKSB7XG4gICAgICAgIHZhciBjYXRlID0gY29udHNbaV0uY2F0ZWdvcnk7XG4gICAgICAgIHZhciBmbmFtZSA9IGNvbnRzW2ldLm5hbWU7XG4gICAgICAgIGlmIChjYXRlID09ICd2aWRlbycpIHtcbiAgICAgICAgICAgIHZhciB0aXRsZSA9ICfwn5O6JyArIGNvbnRzW2ldLm5hbWU7XG4gICAgICAgIH0gZWxzZSBpZiAoY2F0ZSA9PSAnZG9jJykge1xuICAgICAgICAgICAgdmFyIHRpdGxlID0gJ/Cfk5YnICsgY29udHNbaV0ubmFtZTtcbiAgICAgICAgfSBlbHNlIGlmIChjYXRlID09ICdpbWFnZScpIHtcbiAgICAgICAgICAgIHZhciB0aXRsZSA9ICfwn5a8JyArIGNvbnRzW2ldLm5hbWU7XG4gICAgICAgIH0gZWxzZSBpZiAoY2F0ZSA9PSAnemlwJykge1xuICAgICAgICAgICAgdmFyIHRpdGxlID0gJ/Cfk6YnICsgY29udHNbaV0ubmFtZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0aXRsZSA9IGNvbnRzW2ldLm5hbWVcbiAgICAgICAgfVxuICAgICAgICBkLnB1c2goe1xuICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICAgICAgdXJsOiAkKGNvbnRzW2ldLmZpbGVfaWQpLmxhenlSdWxlKChkcml2aWQsIGRvbmd0YWksIGNhdGUsIGZuYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgZXZhbChkb25ndGFpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGxheVxuICAgICAgICAgICAgfSwgZHJpdmlkLCBkb25ndGFpLCBjYXRlLCBmbmFtZSksXG4gICAgICAgICAgICBkZXNjOiBmb3JtYXREYXRlKGNvbnRzW2ldLnVwZGF0ZWRfYXQpICsgJyAgJyArIGZvcm1hdFNpemUoY29udHNbaV0uc2l6ZSksXG4gICAgICAgICAgICBjb2xfdHlwZTogJ3RleHRfMSdcblxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNhdGUgPT0gJ3ZpZGVvJyB8fCBjYXRlID09ICdhdWRpbycpIHtcbiAgICAgICAgICAgIHR1aXNvbmcucHVzaChcbiAgICAgICAgICAgICAgICB0aXRsZS5yZXBsYWNlKC9cXCMvZywgJ18nKS5yZXBsYWNlKC9cXCQvZywgJ18nKSArICckJyArIGNhdGUgKyAnfCcgKyBjb250c1tpXS5maWxlX2lkXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZC5wdXNoKHtcbiAgICAgICAgICAgIHRpdGxlOiAn8J+TgicgKyBjb250c1tpXS5uYW1lLFxuICAgICAgICAgICAgdXJsOiAkKCdoaWtlcjovL2VtcHR5JyArIGNvbnRzW2ldLmZpbGVfaWQpLnJ1bGUoKGRyaXZpZCkgPT4ge1xuICAgICAgICAgICAgICAgIGV2YWwoSlNPTi5wYXJzZShmZXRjaCgnaGlrZXI6Ly9wYWdlL3NlbGZydWxlbG9vcCcsIHt9KSkucnVsZSk7XG4gICAgICAgICAgICB9LCBkcml2aWQpLFxuICAgICAgICAgICAgY29sX3R5cGU6ICdmbGV4X2J1dHRvbidcbiAgICAgICAgfSk7XG5cbiAgICB9IC8vZW5kIGlmXG59XG5cbmV2YWwoSlNPTi5wYXJzZShmZXRjaCgnaGlrZXI6Ly9wYWdlL3B1c2hjb2RlJywge30pKS5ydWxlKTtcblxuZC51bnNoaWZ0KHtcbiAgICB0aXRsZTogZ2V0SXRlbSgnaGlrZXJ0dmJveHNldCcsICcnKSxcbiAgICB1cmw6ICdoaWtlcjovL2VtcHR5JyxcbiAgICBjb2xfdHlwZTogJ2ZsZXhfYnV0dG9uJ1xufSk7XG5kLnVuc2hpZnQoe1xuICAgIHRpdGxlOiAn6K6+572uSVDlnLDlnYAnLFxuICAgIHVybDogXCJpbnB1dDovL1wiICsgZ2V0SXRlbSgnaGlrZXJ0dmJveHNldCcsICdodHRwOi8vJyArIGdldElQKCkgKyAnOjk5NzgnKSArIFwiLy8vL+ivt+i+k+WFpXR2Ym945o6o6YCBSVDlnLDlnYDvvIzlpoJodHRwOi8vXCIgKyBnZXRJUCgpICsgXCI6OTk3OC5qczpzZXRJdGVtKCdoaWtlcnR2Ym94c2V0JyxpbnB1dCk7cmVmcmVzaFBhZ2UoKVwiLFxuICAgIGNvbF90eXBlOiAnZmxleF9idXR0b24nXG59KTtcbi8v5o6o6YCB5Luj56CB57uT5p2fXG5zZXRIb21lUmVzdWx0KHtcbiAgICBkYXRhOiBkXG59KTsiLCJzZWFyY2hfdXJsIjoiIiwiZ3JvdXAiOiIy5rWL6K+VIiwic2VhcmNoRmluZCI6IiIsImRldGFpbF9jb2xfdHlwZSI6Im1vdmllXzEiLCJkZXRhaWxfZmluZF9ydWxlIjoiIiwic2RldGFpbF9jb2xfdHlwZSI6Im1vdmllXzEiLCJzZGV0YWlsX2ZpbmRfcnVsZSI6IiIsInVhIjoibW9iaWxlIiwicHJlUnVsZSI6ImlmICghZ2V0TXlWYXIoXCJhbGlhY2Nlc3NUa1wiKSkge1xuICAgIGxldCBudG9rZW49W107XG4gICAgaWYgKCFmaWxlRXhpc3QoXCJoaWtlcjovL2ZpbGVzL3J1bGVzL2ljeS9pY3ktYWxpLXRva2VuLmpzb25cIikpIHtcbiAgICAgICAgdmFyIHJlZnRva2VuID0gXCJcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcmVmdG9rZW4gPSBKU09OLnBhcnNlKGZldGNoKCdoaWtlcjovL2ZpbGVzL3J1bGVzL2ljeS9pY3ktYWxpLXRva2VuLmpzb24nLCB7fSkpWzBdLnJlZnJlc2hfdG9rZW47XG4gICAgfVxuICAgIHZhciByZWZyZXNoID0gZmV0Y2goJ2h0dHBzOi8vYXV0aC5hbGl5dW5kcml2ZS5jb20vdjIvYWNjb3VudC90b2tlbicsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdVc2VyLUFnZW50JzogUENfVUEsXG4gICAgICAgICAgICAnUmVmZXJlcic6ICdodHRwczovL3d3dy5hbGl5dW5kcml2ZS5jb20vJ1xuICAgICAgICB9LFxuICAgICAgICBib2R5OiAne1wicmVmcmVzaF90b2tlblwiOlwiJyArIHJlZnRva2VuICsgJ1wiLFwiZ3JhbnRfdHlwZVwiOlwicmVmcmVzaF90b2tlblwifScsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnXG4gICAgfSk7XG4gICAgLy9sb2cocmVmcmVzaCk7XG4gICAgaWYgKCFmaWxlRXhpc3QoXCJoaWtlcjovL2ZpbGVzL3J1bGVzL2ljeS9pY3ktYWxpLXRva2VuLmpzb25cIikgfHwgcmVmcmVzaC5sZW5ndGggPiAzMDApIHtcbiAgICAgICAgbnRva2VuLnB1c2goSlNPTi5wYXJzZShyZWZyZXNoKSk7XG4gICAgICAgIHdyaXRlRmlsZShcImhpa2VyOi8vZmlsZXMvcnVsZXMvaWN5L2ljeS1hbGktdG9rZW4uanNvblwiLCBKU09OLnN0cmluZ2lmeShudG9rZW4pKTtcbiAgICB9XG4gICAgXG4gICAgdmFyIHJlZnJlc2ggPSBmZXRjaCgnaGlrZXI6Ly9maWxlcy9ydWxlcy9pY3kvaWN5LWFsaS10b2tlbi5qc29uJywge30pO1xuICAgIHZhciBhY2Nlc3NUayA9IEpTT04ucGFyc2UocmVmcmVzaClbMF0udG9rZW5fdHlwZSArICcgJyArIEpTT04ucGFyc2UocmVmcmVzaClbMF0uYWNjZXNzX3Rva2VuO1xuICAgIHB1dE15VmFyKFwiYWxpYWNjZXNzVGtcIiwgYWNjZXNzVGspO1xufVxuXG5cbiIsInBhZ2VzIjoiW3tcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLoh6rlt7HltYzlpZfpobXpnaJcIixcInBhdGhcIjpcInNlbGZydWxlbG9vcFwiLFwicnVsZVwiOlwidmFyIGQgPSBbXTtcXG5cXG5mdW5jdGlvbiBmb3JtYXREYXRlKF9kYXRlLCBfZm10KSB7XFxuICAgIGxldCBmbXQgPSBfZm10IHx8IFxcXCJ5eXl5LU1NLWRkIEhIOm1tOnNzXFxcIjtcXG4gICAgY29uc3QgZGF0ZSA9ICFpc05hTihfZGF0ZSkgPyBuZXcgRGF0ZShfZGF0ZSAqIDEwMDApIDogbmV3IERhdGUoX2RhdGUpO1xcbiAgICBjb25zdCBvID0ge1xcbiAgICAgICAgXFxcIk0rXFxcIjogZGF0ZS5nZXRNb250aCgpICsgMSwgLy/mnIjku70gXFxuICAgICAgICBcXFwiZCtcXFwiOiBkYXRlLmdldERhdGUoKSwgLy/ml6UgXFxuICAgICAgICBcXFwiaCtcXFwiOiBkYXRlLmdldEhvdXJzKCkgJSAxMiA9PSAwID8gMTIgOiBkYXRlLmdldEhvdXJzKCkgJSAxMixcXG4gICAgICAgIFxcXCJIK1xcXCI6IGRhdGUuZ2V0SG91cnMoKSwgLy/lsI/ml7YgXFxuICAgICAgICBcXFwibStcXFwiOiBkYXRlLmdldE1pbnV0ZXMoKSwgLy/liIYgXFxuICAgICAgICBcXFwicytcXFwiOiBkYXRlLmdldFNlY29uZHMoKSwgLy/np5IgXFxuICAgICAgICBcXFwicStcXFwiOiBNYXRoLmZsb29yKChkYXRlLmdldE1vbnRoKCkgKyAzKSAvIDMpLCAvL+Wto+W6piBcXG4gICAgICAgIFxcXCJTXFxcIjogZGF0ZS5nZXRNaWxsaXNlY29uZHMoKSAvL+avq+enkiBcXG4gICAgfTtcXG4gICAgaWYgKC8oeSspLy50ZXN0KGZtdCkpIHtcXG4gICAgICAgIGZtdCA9IGZtdC5yZXBsYWNlKFJlZ0V4cC4kMSwgKGRhdGUuZ2V0RnVsbFllYXIoKSArIFxcXCJcXFwiKS5zdWJzdHIoNCAtIFJlZ0V4cC4kMS5sZW5ndGgpKTtcXG4gICAgfVxcbiAgICBmb3IgKGxldCBrIGluIG8pIHtcXG4gICAgICAgIGlmIChuZXcgUmVnRXhwKFxcXCIoXFxcIiArIGsgKyBcXFwiKVxcXCIpLnRlc3QoZm10KSkge1xcbiAgICAgICAgICAgIGZtdCA9IGZtdC5yZXBsYWNlKFJlZ0V4cC4kMSwgKFJlZ0V4cC4kMS5sZW5ndGggPT0gMSkgPyAob1trXSkgOiAoKFxcXCIwMFxcXCIgKyBvW2tdKS5zdWJzdHIoKFxcXCJcXFwiICsgb1trXSkubGVuZ3RoKSkpO1xcbiAgICAgICAgfVxcbiAgICB9XFxuICAgIHJldHVybiBmbXQ7XFxufTtcXG5cXG5mdW5jdGlvbiBmb3JtYXRTaXplKHNpemUpIHtcXG4gICAgaWYgKCFzaXplKSB7XFxuICAgICAgICByZXR1cm4gJyc7XFxuICAgIH1cXG4gICAgY29uc3QgdW5pdHMgPSBbJ0InLCAnS0InLCAnTUInLCAnR0InLCAnVEInLCAnUEInLCAnRUInLCAnWkInLCAnWUInXTtcXG4gICAgbGV0IGkgPSAwO1xcbiAgICB3aGlsZSAoc2l6ZSA+PSAxMDI0KSB7XFxuICAgICAgICBzaXplIC89IDEwMjQ7XFxuICAgICAgICBpKys7XFxuICAgIH1cXG4gICAgc2l6ZSA9IGkgPyBOdW1iZXIoc2l6ZS50b0ZpeGVkKDIpKSA6IHNpemU7XFxuICAgIHJldHVybiBgJHtzaXplfSAke3VuaXRzW2ldfWA7XFxufVxcbnZhciB0b2tlbmpzb24gPSBKU09OLnBhcnNlKGZldGNoKCdoaWtlcjovL2ZpbGVzL3J1bGVzL2ljeS9pY3ktYWxpLXRva2VuLmpzb24nLCB7fSkpWzBdO1xcblxcbnZhciByZXNjb2QgPSBmZXRjaCgnaHR0cHM6Ly9hcGkuYWxpeXVuZHJpdmUuY29tL2Fkcml2ZS92My9maWxlL2xpc3QnLCB7XFxuICAgIGhlYWRlcnM6IHtcXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXFxuICAgICAgICAnYXV0aG9yaXphdGlvbic6IGdldE15VmFyKFxcXCJhbGlhY2Nlc3NUa1xcXCIsIFxcXCJcXFwiKVxcbiAgICB9LFxcbiAgICBib2R5OiAne1xcXCJkcml2ZV9pZFxcXCI6XFxcIicgKyBkcml2aWQgKyAnXFxcIixcXFwicGFyZW50X2ZpbGVfaWRcXFwiOlxcXCInICsgZ2V0UmVzQ29kZSgpICsgJ1xcXCIsXFxcImxpbWl0XFxcIjoxMDAsXFxcImltYWdlX3RodW1ibmFpbF9wcm9jZXNzXFxcIjpcXFwiaW1hZ2UvcmVzaXplLHdfMTYwL2Zvcm1hdCxqcGVnXFxcIixcXFwiaW1hZ2VfdXJsX3Byb2Nlc3NcXFwiOlxcXCJpbWFnZVxcXFwvcmVzaXplLHdfMTkyMC9mb3JtYXQsanBlZ1xcXCIsXFxcInZpZGVvX3RodW1ibmFpbF9wcm9jZXNzXFxcIjpcXFwidmlkZW8vc25hcHNob3QsdF8xMDAwLGZfanBnLGFyX2F1dG8sd18zMDBcXFwiLFxcXCJvcmRlcl9ieVxcXCI6XFxcIm5hbWVcXFwiLFxcXCJvcmRlcl9kaXJlY3Rpb25cXFwiOlxcXCJBU0NcXFwifScsXFxuICAgIG1ldGhvZDogJ1BPU1QnXFxufSk7XFxuLy9sb2cocmVzY29kKTtcXG52YXIgY29udHMgPSBKU09OLnBhcnNlKHJlc2NvZCkuaXRlbXM7XFxudmFyIHR1aXNvbmcgPSBbXTtcXG52YXIgZG9uZ3RhaSA9IEpTT04ucGFyc2UoZmV0Y2goJ2hpa2VyOi8vcGFnZS9zZWxmbGF6eXVybCcsIHt9KSkucnVsZS50b1N0cmluZygpO1xcbmZvciAodmFyIGkgaW4gY29udHMpIHtcXG5cXG4gICAgdmFyIGxpc3R5cCA9IGNvbnRzW2ldLnR5cGU7XFxuICAgIGlmIChsaXN0eXAgIT0gJ2ZvbGRlcicpIHtcXG4gICAgICAgIHZhciBjYXRlID0gY29udHNbaV0uY2F0ZWdvcnk7XFxuICAgICAgICB2YXIgZm5hbWUgPSBjb250c1tpXS5uYW1lO1xcbiAgICAgICAgaWYgKGNhdGUgPT0gJ3ZpZGVvJykge1xcbiAgICAgICAgICAgIHZhciB0aXRsZSA9ICfwn5O6JyArIGNvbnRzW2ldLm5hbWU7XFxuICAgICAgICB9IGVsc2UgaWYgKGNhdGUgPT0gJ2RvYycpIHtcXG4gICAgICAgICAgICB2YXIgdGl0bGUgPSAn8J+TlicgKyBjb250c1tpXS5uYW1lO1xcbiAgICAgICAgfSBlbHNlIGlmIChjYXRlID09ICdpbWFnZScpIHtcXG4gICAgICAgICAgICB2YXIgdGl0bGUgPSAn8J+WvCcgKyBjb250c1tpXS5uYW1lO1xcbiAgICAgICAgfSBlbHNlIGlmIChjYXRlID09ICd6aXAnKSB7XFxuICAgICAgICAgICAgdmFyIHRpdGxlID0gJ/Cfk6YnICsgY29udHNbaV0ubmFtZTtcXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgdmFyIHRpdGxlID0gY29udHNbaV0ubmFtZVxcbiAgICAgICAgfVxcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogdGl0bGUsXFxuICAgICAgICAgICAgdXJsOiAkKGNvbnRzW2ldLmZpbGVfaWQpLmxhenlSdWxlKChkcml2aWQsIGRvbmd0YWksIGNhdGUsIGZuYW1lKSA9PiB7XFxuICAgICAgICAgICAgICAgIGV2YWwoZG9uZ3RhaSk7XFxuICAgICAgICAgICAgICAgIHJldHVybiBwbGF5XFxuICAgICAgICAgICAgfSwgZHJpdmlkLCBkb25ndGFpLCBjYXRlLCBmbmFtZSksXFxuICAgICAgICAgICAgZGVzYzogZm9ybWF0RGF0ZShjb250c1tpXS51cGRhdGVkX2F0KSArICcgICcgKyBmb3JtYXRTaXplKGNvbnRzW2ldLnNpemUpLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiAndGV4dF8xJ1xcblxcbiAgICAgICAgfSk7XFxuICAgICAgICBpZiAoY2F0ZSA9PSAndmlkZW8nIHx8IGNhdGUgPT0gJ2F1ZGlvJykge1xcbiAgICAgICAgICAgIHR1aXNvbmcucHVzaChcXG4gICAgICAgICAgICAgICAgdGl0bGUucmVwbGFjZSgvXFxcXCMvZywgJ18nKS5yZXBsYWNlKC9cXFxcJC9nLCAnXycpICsgJyQnICsgY2F0ZSArICd8JyArIGNvbnRzW2ldLmZpbGVfaWRcXG4gICAgICAgICAgICApO1xcbiAgICAgICAgfVxcbiAgICB9IGVsc2Uge1xcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogJ/Cfk4InICsgY29udHNbaV0ubmFtZSxcXG4gICAgICAgICAgICB1cmw6ICQoJ2hpa2VyOi8vZW1wdHknICsgY29udHNbaV0uZmlsZV9pZCkucnVsZSgoZHJpdmlkKSA9PiB7XFxuICAgICAgICAgICAgICAgIGV2YWwoSlNPTi5wYXJzZShmZXRjaCgnaGlrZXI6Ly9wYWdlL3NlbGZydWxlbG9vcCcsIHt9KSkucnVsZSk7XFxuICAgICAgICAgICAgfSwgZHJpdmlkKSxcXG4gICAgICAgICAgICBjb2xfdHlwZTogJ2ZsZXhfYnV0dG9uJ1xcbiAgICAgICAgfSk7XFxuXFxuICAgIH0gLy9lbmQgaWZcXG5cXG5cXG59XFxuZXZhbChKU09OLnBhcnNlKGZldGNoKCdoaWtlcjovL3BhZ2UvcHVzaGNvZGUnLCB7fSkpLnJ1bGUpO1xcblxcbnNldEhvbWVSZXN1bHQoe1xcbiAgICBkYXRhOiBkXFxufSk7XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLoh6rlt7HliqjmgIHop6PmnpBcIixcInBhdGhcIjpcInNlbGZsYXp5dXJsXCIsXCJydWxlXCI6XCJmdW5jdGlvbiBhY2Nlc3NUaygpIHtcXG4gICAgbGV0IG50b2tlbiA9IFtdO1xcbiAgICB2YXIgcmVmdG9rZW4gPSBKU09OLnBhcnNlKGZldGNoKCdoaWtlcjovL2ZpbGVzL3J1bGVzL2ljeS9pY3ktYWxpLXRva2VuLmpzb24nLCB7fSkpWzBdLnJlZnJlc2hfdG9rZW47XFxuICAgIGxldCBhY2Nlc3NUayA9IFxcXCJcXFwiO1xcbiAgICBsZXQgcmVmcmVzaCA9IGZldGNoKCdodHRwczovL2F1dGguYWxpeXVuZHJpdmUuY29tL3YyL2FjY291bnQvdG9rZW4nLCB7XFxuICAgICAgICBoZWFkZXJzOiB7XFxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcXG4gICAgICAgICAgICAnUmVmZXJlcic6ICdodHRwczovL3d3dy5hbGl5dW5kcml2ZS5jb20vJ1xcbiAgICAgICAgfSxcXG4gICAgICAgIGJvZHk6ICd7XFxcInJlZnJlc2hfdG9rZW5cXFwiOlxcXCInICsgcmVmdG9rZW4gKyAnXFxcIixcXFwiZ3JhbnRfdHlwZVxcXCI6XFxcInJlZnJlc2hfdG9rZW5cXFwifScsXFxuICAgICAgICBtZXRob2Q6ICdQT1NUJ1xcbiAgICB9KTtcXG4gICAgbnRva2VuLnB1c2goSlNPTi5wYXJzZShyZWZyZXNoKSk7XFxuICAgIGlmICghZmlsZUV4aXN0KFxcXCJoaWtlcjovL2ZpbGVzL3J1bGVzL2ljeS9pY3ktYWxpLXRva2VuLmpzb25cXFwiKSB8fCByZWZyZXNoLmxlbmd0aCA+IDMwMCkge1xcbiAgICAgICAgd3JpdGVGaWxlKFxcXCJoaWtlcjovL2ZpbGVzL3J1bGVzL2ljeS9pY3ktYWxpLXRva2VuLmpzb25cXFwiLCBKU09OLnN0cmluZ2lmeShudG9rZW4pKTtcXG4gICAgfVxcbiAgICAvL2xvZyhKU09OLnBhcnNlKHJlZnJlc2gpKTsgICAgXFxuICAgIGFjY2Vzc1RrID0gSlNPTi5wYXJzZShyZWZyZXNoKS50b2tlbl90eXBlICsgJyAnICsgSlNPTi5wYXJzZShyZWZyZXNoKS5hY2Nlc3NfdG9rZW47XFxuICAgIHB1dE15VmFyKFxcXCJhbGlhY2Nlc3NUa1xcXCIsIGFjY2Vzc1RrKTtcXG4gICAgcmV0dXJuIGFjY2Vzc1RrXFxufVxcbmlmIChjYXRlID09ICd2aWRlbycgfHwgY2F0ZSA9PSAnYXVkaW8nKSB7XFxuICAgIC8v5aSE55CG6KeG6aKRICBcXG4gICAgdmFyIGRmaWQgPSBpbnB1dDtcXG4gICAgaWYgKGNhdGUgPT0gJ3ZpZGVvJykge1xcbiAgICAgICAgdmFyIGpzb24gPSBmZXRjaCgnaHR0cHM6Ly9hcGkuYWxpeXVuZHJpdmUuY29tL3YyL2ZpbGUvZ2V0X3ZpZGVvX3ByZXZpZXdfcGxheV9pbmZvJywge1xcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcXG4gICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBhY2Nlc3NUaygpXFxuICAgICAgICAgICAgfSxcXG4gICAgICAgICAgICBib2R5OiAne1xcXCJkcml2ZV9pZFxcXCI6XFxcIicgKyBkcml2aWQgKyAnXFxcIixcXFwiY2F0ZWdvcnlcXFwiOlxcXCJsaXZlX3RyYW5zY29kaW5nXFxcIixcXFwiZmlsZV9pZFxcXCI6XFxcIicgKyBpbnB1dCArICdcXFwiLFxcXCJ0ZW1wbGF0ZV9pZFxcXCI6XFxcIlxcXCJ9JyxcXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJ1xcbiAgICAgICAgfSk7XFxuICAgICAgICAvL2xvZyhqc29uKTtcXG5cXG4gICAgICAgIHZhciBkZmlkID0gSlNPTi5wYXJzZShqc29uKS5maWxlX2lkO1xcbiAgICB9XFxuICAgIGlmIChjYXRlID09ICd2aWRlbycpIHtcXG4gICAgICAgIHZhciBib2R5ID0gJ3tcXFwiZXhwaXJlX3NlY1xcXCI6MTE1MjAwLFxcXCJmaWxlX2lkXFxcIjpcXFwiJyArIGRmaWQgKyAnXFxcIixcXFwiZHJpdmVfaWRcXFwiOlxcXCInICsgZHJpdmlkICsgJ1xcXCJ9JztcXG5cXG4gICAgfSBlbHNlIHtcXG4gICAgICAgIHZhciBib2R5ID0gJ3tcXFwiZmlsZV9pZFxcXCI6XFxcIicgKyBkZmlkICsgJ1xcXCIsXFxcImdldF9hdWRpb19wbGF5X2luZm9cXFwiOnRydWUsXFxcImRyaXZlX2lkXFxcIjpcXFwiJyArIGRyaXZpZCArICdcXFwifSc7XFxuICAgIH1cXG4gICAgdmFyIGRqc29uID0gZmV0Y2goJ2h0dHBzOi8vYXBpLmFsaXl1bmRyaXZlLmNvbS92Mi9maWxlL2dldF9kb3dubG9hZF91cmwnLCB7XFxuICAgICAgICBoZWFkZXJzOiB7XFxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcXG4gICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGFjY2Vzc1RrKClcXG4gICAgICAgIH0sXFxuICAgICAgICBib2R5OiBib2R5LFxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCdcXG4gICAgfSk7XFxuICAgIHZhciBsaW5rID0gSlNPTi5wYXJzZShkanNvbikudXJsO1xcblxcbiAgICB2YXIgcGxheSA9IGxpbmsgKyAnO3tSZWZlcmVyQGh0dHBzOi8vd3d3LmFsaXl1bmRyaXZlLmNvbS99JztcXG5cXG59IGVsc2UgaWYgKGNhdGUgPT0gJ2ltYWdlJykge1xcbiAgICAvL+WkhOeQhuaWh+aho1xcbiAgICB2YXIganNvbiA9IGZldGNoKCdodHRwczovL2FwaS5hbGl5dW5kcml2ZS5jb20vdjIvZmlsZS9nZXRfZG93bmxvYWRfdXJsJywge1xcbiAgICAgICAgaGVhZGVyczoge1xcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXFxuICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBhY2Nlc3NUaygpXFxuICAgICAgICB9LFxcbiAgICAgICAgYm9keTogJ3tcXFwiZHJpdmVfaWRcXFwiOlxcXCInICsgZHJpdmlkICsgJ1xcXCIsXFxcImV4cGlyZV9zZWNcXFwiOiAxMTUyMDAsXFxcImZpbGVfaWRcXFwiOlxcXCInICsgaW5wdXQgKyAnXFxcIn0nLFxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCdcXG4gICAgfSk7XFxuXFxuICAgIC8vbG9nKGpzb24pO1xcbiAgICB2YXIgbG9jbGluayA9IEpTT04ucGFyc2UoanNvbikudXJsO1xcblxcbiAgICAvL2xvZyhsb2NsaW5rKTtcXG4gICAgaWYgKGNhdGUgPT0gJ2ltYWdlJykge1xcbiAgICAgICAgdmFyIHBsYXkgPSAncGljczovLycgKyBsb2NsaW5rICsgJ0BSZWZlcmVyPWh0dHBzOi8vd3d3LmFsaXl1bmRyaXZlLmNvbS8nO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgICAgdmFyIHBsYXkgPSBsb2NsaW5rICsgJzt7UmVmZXJlckBodHRwczovL3d3dy5hbGl5dW5kcml2ZS5jb20vfSc7XFxuICAgIH1cXG59IGVsc2Uge1xcbiAgICB2YXIgcGxheSA9ICd0b2FzdDovL+ivpeagvOW8j+aaguacquaUr+aMge+8jOebruWJjeWPquaUr+aMgeafpeeci+inhumikeWSjOWbvueJh+OAgidcXG59XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLmjqjpgIHku6PnoIFcIixcInBhdGhcIjpcInB1c2hjb2RlXCIsXCJydWxlXCI6XCJqczpcXG4vL+aOqOmAgeS7o+eggVxcbmxldCBwdXNoID0gSlNPTi5zdHJpbmdpZnkoe1xcbiAgICAvL1xcXCJoZWFkZXJzXFxcIjpKU09OLnN0cmluZ2lmeSh7XFxcIlxcXCI6XFxcIlxcXCJ9KSxcXG4gICAgXFxcInVybFxcXCI6IHR1aXNvbmcuam9pbignIycpLFxcbiAgICBcXFwiZGVmYXVsdF9kcml2ZV9pZFxcXCI6IGRyaXZpZCxcXG4gICAgXFxcInJlZnJlc2hfdG9rZW5cXFwiOiB0b2tlbmpzb24ucmVmcmVzaF90b2tlblxcbn0pLnJlcGxhY2UoL1xcXFwmL2csICfvvIbvvIYnKTtcXG4vL2xvZyhwdXNoKTtcXG5sZXQgdHZpcCA9IGdldEl0ZW0oJ2hpa2VydHZib3hzZXQnLCAnJyk7XFxuLy9sb2codHVpc29uZy5sZW5ndGgpO1xcbmlmKHR1aXNvbmcubGVuZ3RoPjApe1xcbmQudW5zaGlmdCh7XFxuICAgIHRpdGxlOiBcXFwi5o6o6YCB5b2T5YmN6aG16Z+z6KeG6aKR5YiwVFZCb3hcXFwiLFxcbiAgICB1cmw6ICQocHVzaCkubGF6eVJ1bGUoKHR2aXApID0+IHtcXG4gICAgICAgIGlmICghdHZpcC5pbmNsdWRlcygnOjk5NycpKSB7XFxuICAgICAgICAgICAgcmV0dXJuICd0b2FzdDovL0lQ5Li656m65oiW5LiN5q2j56Gu77yM6K+35YWI6K6+572u44CCJ1xcbiAgICAgICAgfTtcXG4gICAgICAgIHZhciBzdGF0ZSA9IHJlcXVlc3QodHZpcCArICcvYWN0aW9uJywge1xcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxcbiAgICAgICAgICAgICAgICAvLydYLVJlcXVlc3RlZC1XaXRoJzogJ1hNTEh0dHBSZXF1ZXN0JyxcXG4gICAgICAgICAgICAgICAgJ1JlZmVyZXInOiB0dmlwXFxuICAgICAgICAgICAgfSxcXG4gICAgICAgICAgICB0aW1lb3V0OiAyMDAwLFxcbiAgICAgICAgICAgIGJvZHk6ICdkbz1wdXNoJnVybD0nICsgaW5wdXQsXFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCdcXG4gICAgICAgIH0pO1xcbiAgICAgICAgbG9nKHN0YXRlKTtcXG4gICAgICAgIGlmIChzdGF0ZSA9PSAnb2snKSB7XFxuICAgICAgICAgICAgcmV0dXJuICd0b2FzdDovL+aOqOmAgeaIkOWKn++8jOWmguaenHR2Ym945pi+56S64oCc5rKh5om+5Yiw5pWw5o2u4oCd5Y+v6IO95piv5b2T5YmN55qEamFy5LiN5pSv5oyB44CCJztcXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgcmV0dXJuICd0b2FzdDovL+aOqOmAgeWksei0pSdcXG4gICAgICAgIH1cXG4gICAgfSwgdHZpcCksXFxuICAgIGNvbF90eXBlOiBcXFwic2Nyb2xsX2J1dHRvblxcXCJcXG59KTtcXG59XFxuLy9cIn1dIiwiaWNvbiI6Imh0dHBzOi8vZ3cuYWxpY2RuLmNvbS9pbWdleHRyYS9pMy9PMUNOMDFhajlyZEQxR1MwRThpbzExdF8hITYwMDAwMDAwMDA2MjAtNzMtdHBzLTE2LTE2LmljbyIsInByb3h5IjoiIn0=